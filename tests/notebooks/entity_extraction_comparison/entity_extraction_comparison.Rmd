---
title: "Entity Extraction Performance Evaluation - R & Python"
author: "Evan Canfield"
date: "12/30/2020"
output:
  html_document:
    df_print: kable
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Purpose
The purpose of this notebook is to compare the extracted entities generated by the keras model with the entites generated by regex splitting.

# Import
## Libraries
```{r import_libraries, message=FALSE}
  if (!require(pacman)) {install.packages('pacman')}
  p_load(
    dplyr
  )
```


## Data
The input text will be our training data hypotheses.
```{r import_data}

df_raw <- read.csv("entity_extraction_comparison.csv", stringsAsFactors = FALSE)
# df_raw$sentence
```


# Generate Nodes
## Rename column name
```{r}
df_raw %>% glimpse()
```


## Extract Nodes
```{r}
df <- df_raw %>% 
  rename(
    hypothesis_training = hypothesis,
    hypothesis = hypothesis_pr
    )

df %>% glimpse()

nodes <- entity_extraction(df)

nodes
```

## Export CSV
```{r}
output <- cbind(df, nodes) %>% 
  rename(node1_model = cause, 
         node2_model = effect) %>% 
  select(file_name:node2, node1_split:node2_model) %>% 
  rename(hypothesis = hypothesis_training)

output %>%  glimpse()
```



```{r}
write.csv(output, "training_data_w_extracted_entities.csv")
```

